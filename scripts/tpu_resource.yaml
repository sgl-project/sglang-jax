resources:
  accelerators: $ACCELERATOR
  use_spot: True
  disk_size: 512  # Ensure model checkpoints can fit.
  disk_tier: best

secrets:
  USERNAME: null
  GIT_TOKEN: null


setup: |
  if [ -d "sglang-jax" ]; then
    cd sglang-jax
    git remote set-url origin https://${USERNAME}:${GIT_TOKEN}@github.com/sgl-project/sglang-jax.git
    git fetch origin
    git clean -fd
    git reset --hard origin/$REF
  else
    git clone https://${USERNAME}:${GIT_TOKEN}@github.com/sgl-project/sglang-jax.git
    cd sglang-jax
    git checkout $REF
  fi
  uv pip install -e python/
